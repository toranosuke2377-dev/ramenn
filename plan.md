# 二郎ラーメンシュミレーター 実装計画書

## A. 目的と完成イメージ
- **目的**: ユーザーが「二郎系ラーメン」特有のコール（注文）の緊張感と達成感を、手軽なブラウザゲームとして体験する。
- **完成イメージ**:
    - 1画面完結のレトロRPG風チャットUI。
    - プレイ時間は1回あたり1分未満。
    - 成功・失敗・隠し要素による「クスッ」とくる笑いを提供。
    - 失敗しても即座にリトライ可能で、中毒性を持たせる。

## B. 技術スタック案
- **Framework**: **Vite + React + TypeScript**
- **AI Integration**: **Google Gemini API (Client-side)**
    - ユーザーがAPIキーを入力して有効化するBYOK (Bring Your Own Key) 方式。
    - 通常の判定ロジックは既存のものを維持し、**「セリフ生成」のみAIに任せる**ことでゲームバランスを崩さない。

## C. ディレクトリ構成案
```
/
├── src/
│   ├── components/
│   │   ├── ...
│   ├── core/
│   │   ├── gameLogic.ts  # 判定ロジック (ルールベース)
│   │   ├── aiService.ts  # [NEW] AI呼び出し担当
│   │   └── ...
```

## AI実装のアプローチ
1. **ハイブリッド判定**:
    - **ルールの厳格さ**: 既存の `judgeOrder` 関数で判定（Clear, GameOver, MissingItemなど）。
    - **表現の柔軟さ**: 判定結果とユーザー入力をAIに投げ、店主のキャラクター（頑固、怖い、デレなど）になりきったセリフを生成させる。
    - プロンプト例:
      > あなたは頑固なラーメン屋の店主です。客の注文「{input}」は判定結果「{result}（理由: {missing}）」でした。この結果に基づき、客に対する短くパンチのある返答を生成してください。感情は「{emotion}」です。

2. **設定画面**:
    - AIモードON/OFFスイッチ。
    - APIキー入力欄（localStorageに保存）。

## 開発ステップ (AI追加)
1. **AI Service**: Gemini APIクライアントの実装。
2. **Settings**: APIキー入力UIの追加。
3. **App Integration**: 判定後にAIを呼び出し、返答を差し替える処理の実装。
